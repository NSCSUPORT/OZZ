<script>
    document.getElementById("generate-pix").addEventListener("click", function () {
        const valorInvestido = document.getElementById("investment-value").value;
        const chavePixCliente = document.getElementById("pix-key").value;

        if (!valorInvestido || !chavePixCliente) {
            alert('Por favor, insira um valor para o investimento e forneça sua chave PIX!');
            return;
        }

        // Formatar o valor com 2 casas decimais
        const valorFormatado = parseFloat(valorInvestido).toFixed(2);

        // Criar o payload Pix seguindo o padrão BR Code
        const payloadPix = `
            000201
            26580014BR.GOV.BCB.PIX
            01${chavePixCliente}
            520400005303986
            5404${valorFormatado}
            5802BR
            5920HoloFi
            6009São Paulo
            6304
        `.replace(/\s+/g, ''); // Remove espaços desnecessários

        // Gerar o QR Code com os dados do Pix
        QRCode.toDataURL(payloadPix, { errorCorrectionLevel: 'H' }, function (err, url) {
            if (err) {
                console.error('Erro ao gerar QR Code:', err);
                alert('Erro ao gerar o QR Code!');
            } else {
                const qrCodeElement = document.getElementById("qr-image");
                document.getElementById("qr-code").style.display = "block";
                qrCodeElement.src = url;
            }
        });
    });
</script>
