<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <link rel="icon" href="z.png" type="image/x-icon">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Investimentos</title>
    <style>
        body {
            font-family: 'Roboto', Arial, sans-serif;
            background-color: #000;
            color: #00FF00;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            flex-direction: column;
            padding: 10px;
            zoom: 80%;
        }

        #connected-container {
            display: none;
            margin-top: 20px;
        }

        #status-message {
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <h1>Investimentos HoloFi</h1>
    <div class="container">
        <!-- Botão para conectar ao MetaMask -->
        <button id="connect-wallet">Conectar MetaMask</button>
        
        <!-- Container visível após a conexão -->
        <div id="connected-container">
            <button id="make-investment">Fazer Investimento</button>
            <button id="redeem-funds">Resgatar Fundos</button>
        </div>
        <!-- Mensagem de status -->
        <div id="status-message"></div> 
    </div>

    <script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.min.js"></script>
    <script>
        // Função para conectar ao MetaMask
        document.getElementById("connect-wallet").addEventListener("click", async () => {
            const statusMessage = document.getElementById("status-message");
            const connectButton = document.getElementById("connect-wallet");
            const connectedContainer = document.getElementById("connected-container");

            if (typeof window.ethereum !== 'undefined') {
                try {
                    // Solicitar contas do MetaMask
                    const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });
                    const account = accounts[0];

                    // Definir o provedor e o assinante
                    const provider = new ethers.JsonRpcProvider("https://mainnet.infura.io/v3/ad86f1b6ed54493bafb904ee0f857f83");
                    const signer = provider.getSigner(account);

                    // Atualizar a interface
                    statusMessage.textContent = `Conectado com a conta: ${account}`;
                    statusMessage.style.color = "green";
                    console.log("Conectado com a conta:", account);

                    // Esconder o botão de conectar
                    connectButton.style.display = 'none';

                    // Exibir os botões de investimento após a conexão
                    connectedContainer.style.display = 'block';
                } catch (error) {
                    console.error("Erro ao conectar ao MetaMask:", error);
                    statusMessage.textContent = "Erro ao conectar ao MetaMask. Verifique o console para mais detalhes.";
                    statusMessage.style.color = "red";
                }
            } else {
                statusMessage.textContent = "MetaMask não detectado. Instale o MetaMask para continuar.";
                statusMessage.style.color = "red";
            }
        });

        // Funções para os botões de investimento e resgatar fundos (pode ser ajustado conforme suas necessidades)
        document.getElementById("make-investment").addEventListener("click", () => {
            alert("Investimento feito com sucesso!");
        });

        document.getElementById("redeem-funds").addEventListener("click", () => {
            alert("Fundos resgatados com sucesso!");
        });
    </script>
</body>
</html>
